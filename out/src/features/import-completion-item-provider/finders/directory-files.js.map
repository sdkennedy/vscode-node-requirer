{"version":3,"sources":["../../../../../src/features/import-completion-item-provider/finders/directory-files.js"],"names":[],"mappings":";;;;;kBAyBwB,iB;;AAzBxB;;AACA;;AACA;;AAGA,SAAS,SAAT,CAAmB,IAAnB,EAAyB;;AAErB,QAAI,KAAK,CAAL,MAAY,GAAhB,EAAqB;AACjB,eAAO,QAAQ,OAAR,CAAgB,EAAhB,CAAP;AACH;AACD,WAAO,cAAK,IAAL,EAAW,IAAX,CACH,iBAAS;AACL,YAAI,MAAM,MAAN,EAAJ,EAAoB;AAChB,mBAAO,KAAK,QAAL,CAAc,KAAd,IAAuB,CAAC,IAAD,CAAvB,GAAgC,EAAvC;AACH,SAFD,MAEO,IAAI,MAAM,WAAN,EAAJ,EAAyB;AAC5B,mBAAO,kBAAkB,IAAlB,CAAP;AACH,SAFM,MAEA;AACH,mBAAO,EAAP;AACH;AACJ,KATE,CAAP;AAWH;;AAED,IAAM,cAAc,SAAd,WAAc;AAAA,WAAQ,SAAS,cAAT,IAA2B,KAAK,CAAL,MAAY,GAA/C;AAAA,CAApB;;AAEe,SAAS,iBAAT,CAA2B,OAA3B,EAAoC;AAC/C,WAAO,iBAAQ,OAAR,EAAiB,IAAjB,CACH,iBAAS;AACL,YAAM,WAAW,MACZ,MADY,CACL,WADK,EAEZ,GAFY,CAER;AAAA,mBAAQ,gBAAK,OAAL,EAAc,IAAd,CAAR;AAAA,SAFQ,EAGZ,GAHY,CAGR,SAHQ,CAAjB;AAIA,eAAO,QAAQ,GAAR,CAAY,QAAZ,EACF,IADE,eAAP;AAEH,KARE,CAAP;AAUH","file":"directory-files.js","sourcesContent":["import {stat, readdir} from 'mz/fs';\nimport {join, relative} from 'path';\nimport {flatten} from '../../../util';\n\n\nfunction findFiles(path) {\n    // Skip hidden files\n    if (path[0] === '.') {\n        return Promise.resolve([]);\n    }\n    return stat(path).then(\n        stats => {\n            if (stats.isFile()) {\n                return path.endsWith('.js') ? [path] : [];\n            } else if (stats.isDirectory()) {\n                return getDirectoryFiles(path);\n            } else {\n                return [];\n            }\n        }\n    );\n}\n\nconst isValidFile = file => file !== 'node_modules' && file[0] !== '.';\n\nexport default function getDirectoryFiles(dirPath) {\n    return readdir(dirPath).then(\n        files => {\n            const promises = files\n                .filter(isValidFile)\n                .map(file => join(dirPath, file))\n                .map(findFiles);\n            return Promise.all(promises)\n                .then(flatten);\n        }\n    );\n}"]}